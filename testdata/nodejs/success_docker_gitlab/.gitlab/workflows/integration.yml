# Code generated by craft; DO NOT EDIT.

---
include:

  # Docker template
  - project: "to-be-continuous/docker"
    ref: "5"
    file: "templates/gitlab-ci-docker.yml"

  # Node.js template
  - project: "to-be-continuous/node"
    ref: "3"
    file: "templates/gitlab-ci-node.yml"

variables:
  NODE_IMAGE: "registry.hub.docker.com/library/node:lts-alpine"
  NODE_BUILD_ARGS: "run build --prod"
  NODE_TEST_ARGS: "test -- --coverage"
  NODE_LINT_ENABLED: "true"
  NODE_LINT_ARGS: "run lint"
  NODE_OUTDATED_DISABLED: "true"
  NODE_SBOM_DISABLED: "true"

  DOCKER_KANIKO_IMAGE: "gcr.io/kaniko-project/executor:debug"
  DOCKER_SNAPSHOT_IMAGE: "${CI_REGISTRY_IMAGE}:${SEMREL_INFO_NEXT_VERSION}"
  DOCKER_RELEASE_IMAGE: "${CI_REGISTRY_IMAGE}:${SEMREL_INFO_NEXT_VERSION}"
  DOCKER_RELEASE_EXTRA_TAGS: "latest \\g<major>.\\g<minor> \\g<major"
  DOCKER_METADATA: |
    --label org.opencontainers.image.created=${CI_JOB_STARTED_AT}
    --label org.opencontainers.image.ref.name=${CI_COMMIT_REF_NAME}
    --label org.opencontainers.image.version=${SEMREL_INFO_NEXT_VERSION}
    --label org.opencontainers.image.revision=${CI_COMMIT_SHA}
  DOCKER_SEMREL_RELEASE_DISABLED: "true"
  DOCKER_HEALTHCHECK_DISABLED: "true"
  DOCKER_TRIVY_SECURITY_LEVEL_THRESHOLD: "MEDIUM,HIGH,CRITICAL"
  DOCKER_TRIVY_ARGS: "--ignore-unfixed --exit-code 1 --exit-on-eol 1"
  DOCKER_SBOM_DISABLED: "true"
