# Code generated by craft; DO NOT EDIT.

name: Node Build
run-name: Node Build

<<- $specifics := get .Languages "nodejs" >>
<<- $manager := cutAfter $specifics.PackageManager "@" >>

on:
  workflow_call:

jobs:

  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
<<- if eq $manager "pnpm" >>
      - uses: pnpm/action-setup@v4
<<- end >>
<<- if eq $manager "bun" >>
      - uses: oven-sh/setup-bun@v2
        with:
          bun-version-file: package.json
<<- else >>
      - uses: actions/setup-node@v4
        with:
          cache: << $manager >>
          node-version: lts/*
<<- end >>
<<- if eq $manager "npm" >>
      - run: << $manager >> ci
<<- else >>
      - run: << $manager >> install --frozen-lockfile
<<- end >>
      - run: << $manager >> run build
<<- if .IsStatic "pages" >>
      - uses: actions/upload-pages-artifact@v3
        with:
          name: github-pages
          path: dist
          retention-days: 1
<<- end >>
      - uses: actions/upload-artifact@v4
        with:
          name: build
          path: dist
          retention-days: 1