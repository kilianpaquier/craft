// Code generated by craft; DO NOT EDIT.

// https://docs.renovatebot.com/configuration-options/

<<- /* add all categories in case the current repository is an "empty" one, meaning not language associated */ ->>
<<- $all := le (len .Languages) 0 >>

<<- $categories := list "cd" "ci" >>
<<- if or $all (hasKey .Languages "golang") (hasKey .Languages "hugo") >><<- $categories = append $categories "golang" >><<- end >>
<<- if or $all (hasKey .Languages "node") >><<- $categories = append $categories "js" >><<- end >>
<<- if or $all (hasKey .Languages "python") >><<- $categories = append $categories "python" >><<- end >>
<<- if or $all (hasKey .Languages "rust") >><<- $categories = append $categories "rust" >><<- end >>
<<- if or $all (not .NoChart) >><<- $categories = concat $categories (list "helm" "kubernetes") >><<- end >>
<<- if or $all .Docker >><<- $categories = append $categories "docker" >><<- end >>

{
    "extends": [ ":gitSignOff" ],
    "enabled": true,
    "branchPrefix": "renovate/",
    "labels": [ "dependencies" ],

    "branchConcurrentLimit": 0,
    "prConcurrentLimit": 0,
    "prCreation": "immediate",
    "prHourlyLimit": 0,

    "ignorePaths": [
      "**/bower_components/**",
      "**/examples/**",
      "**/fixtures/**",
      "**/node_modules/**",
      "**/test/**",
      "**/testdata/**",
      "**/tests/**",
    ],

    "dependencyDashboard": false,
    "osvVulnerabilityAlerts": false, // https://github.com/renovatebot/renovate/discussions/20542
    "forkProcessing": "disabled",

    "minimumReleaseAge": "7 days",
    "fetchChangeLogs": "pr",

    "semanticCommits": "auto",
    "semanticCommitType": "chore",
    "semanticCommitScope": "deps",

    "separateMajorMinor": true,
    "separateMinorPatch": false,
    "separateMultipleMajor": true,
    "separateMultipleMinor": false,

    "baseBranches": [
      "$default",
      "/^v[0-9]+\.x/",
      "/^v[0-9]+\.[0-9]+\.x/",
    ],

    "reviewers": [
<<- range $.Maintainers >>
      "<< .Name >>",
<<- end >>
    ],
    "bbUseDefaultReviewers": true,
    "gitLabIgnoreApprovals": true,

    "assignAutomerge": true,
    "automerge": "false",
    "automergeStrategy": "fast-forward",
    "automergeType": "pr",
    "platformAutomerge": true,

    "rebaseLabel": "rebase",
    "rebaseWhen": "behind-base-branch",
    "recreateWhen": "auto",
    "stopUpdatingLabel": "pause",

    "commitMessageLowerCase": "auto",
    "configMigration": false, // removes comments and sets indent to 2 and add a lot of newlines (https://github.com/renovatebot/renovate/issues/16359)
    "platformCommit": "auto",

    "goGetDirs": [ "./..." ],
    "postUpdateOptions": [
        "gomodTidy",
        "gomodUpdateImportPaths",
        "helmUpdateSubChartArchives"
    ],
    "rangeStrategy": "bump",
    "updateLockFiles": true,
    "useBaseBranchConfig": "none",

    "lockFileMaintenance": { "automerge": true },
    "major": { "automerge": false },
    "minor": { "automerge": true },
    "patch": { "automerge": true },
    "pin": { "automerge": true },

    "packageRules": [
<<- range $categories >>
        {
          "addLabels": [ "non-major" ],
          "groupName": "<< . >> dependencies (non major)",
          "matchCategories": [ "<< . >>" ],
          "matchUpdateTypes": [ "!major" ]
        },
        {
          "addLabels": [ "major" ],
          "groupName": "<< . >> dependencies (major)",
          "matchCategories": [ "<< . >>" ],
          "matchUpdateTypes": [ "major" ]
        },
<<- end >>
    ],
}